---
title: 'Learning Lab 4 Case Study'
author: ""
date: "`r format(Sys.Date(),'%B %e, %Y')`"
output:
  html_document:
    toc: yes
    toc_depth: 4
    toc_float: yes
    code_folding: show
    code_download: TRUE
editor_options:
  markdown:
    wrap: 72
bibliography: lit/references.bib
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

In the overview presentation for this learning lab, we considered five steps in our supervised machine learning process. Those steps are mirrored here---with the addition of a preamble step whereby we load and process the data.

Our driving question is: What if we do not have training data?

## Step 0: Loading and setting up

First, let's load the packages we'll use---the familiar {tidyverse} and several others focused on modeling. Like in earlier learning labs, click the green arrow to run the code chunk.

class: clear, inverse, center, middle

# Code Examples

---

# Estimating 3 groups

We can see all three steps in this code chunk

```{r, eval = FALSE, echo = TRUE}
library(tidyLPA)
library(dplyr)

pisaUSA15[1:100, ] %>%
  select(broad_interest, enjoyment, self_efficacy) %>% # select three variables
  estimate_profiles(3) %>%  # estimate 3 profiles
  plot_profiles()
```

---

# Estimating 3 groups

```{r plot-3, echo = FALSE, message = FALSE, warning = FALSE}
library(tidyLPA)
library(dplyr)

pisaUSA15[1:100, ] %>%
  select(broad_interest, enjoyment, self_efficacy) %>% # select three variables
  estimate_profiles(3) %>% # estimate 3 profiles
  plot_profiles() # interpret
```

---

# Interpreting

- How might we interpret these profiles?
- Let's look at the raw data (see `get_data()`)
- How might we validate them?

---

# Comparing profiles
 
```{r, echo = TRUE, eval = FALSE}
pisaUSA15[1:100, ] %>%
    select(broad_interest, enjoyment, self_efficacy) %>%
    single_imputation() %>%
    estimate_profiles(1:3, 
                      variances = c("equal", "varying"),
                      covariances = c("zero", "varying")) %>%
    compare_solutions(statistics = c("AIC", "BIC"))

```

---

# Comparing profiles

```{r, echo = FALSE, eval = TRUE}
pisaUSA15[1:100, ] %>%
    select(broad_interest, enjoyment, self_efficacy) %>%
    single_imputation() %>%
    estimate_profiles(1:3, 
                      variances = c("equal", "varying"),
                      covariances = c("zero", "varying")) %>%
    compare_solutions(statistics = c("AIC", "BIC"))

```

---

# Other functions for working with LPA output

```{r, eval = FALSE}
get_estimates(m3)
get_data(m3)
get_fit(m4)
```
